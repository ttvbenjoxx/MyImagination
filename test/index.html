<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MyImagination Forum</title>

  <!-- Load Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <!-- Load Intro.js for tutorial styling -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intro.js@5.1.0/minified/introjs.min.css" />

  <!-- Your external CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="header-left">
      <div class="logo">MyImagination</div>
      <button id="filterBtn" class="icon-button" title="Filter: Most Popular">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
        </svg>
      </button>
    </div>
    <div class="header-buttons">
      <div id="userProfile" class="user-profile">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span id="username">DummyUser</span>
        <div id="logoutDropdown" class="logout-dropdown">
          <p>Are you sure you want to sign out?</p>
          <button id="confirmLogout" class="logout-button">Sign Out</button>
        </div>
      </div>
      <button id="newIdeaBtn" class="icon-button" title="New Idea">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
      </button>
    </div>
  </header>

  <div class="container" role="main">
    <div id="ideasGrid" class="ideas-grid"></div>
  </div>

  <button id="infoBtn" class="info-icon" title="Info">
    <span class="info-text">i</span>
  </button>

  <!-- Intro Modal -->
  <div id="introModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <h2 class="modal-title">Welcome to MyImagination!</h2>
      <p>This site was built by a student at FCHS to gather and share creative website ideas. Please continue with Google to unlock full access to the site.</p>
      <button class="gsi-material-button" onclick="firebaseLogin()">Continue with Google</button>
    </div>
  </div>

  <!-- Signed Out Modal -->
  <div id="signedOutModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <h2 class="modal-title">Whoops!</h2>
      <p>Looks like you've been signed out. Let's get you back on track.</p>
      <button class="gsi-material-button" onclick="firebaseLogin()">Continue with Google</button>
    </div>
  </div>

  <!-- New Idea Modal -->
  <div id="newIdeaModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Share Your Idea</h2>
        <button class="close-modal" onclick="hideModal('newIdeaModal')">&times;</button>
      </div>
      <form id="newIdeaForm">
        <div class="form-group">
          <label class="form-label" for="ideaSubject">Subject</label>
          <input type="text" id="ideaSubject" class="form-input" required />
        </div>
        <div class="form-group">
          <label class="form-label" for="ideaDescription">Description</label>
          <textarea id="ideaDescription" class="form-input" required></textarea>
        </div>
        <button type="submit" class="submit-button">Post Idea</button>
      </form>
    </div>
  </div>

  <!-- Full Idea Modal -->
  <div id="fullIdeaModal" class="modal" role="dialog" aria-modal="true"></div>

  <!-- Info Modal -->
  <div id="infoModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Information</h2>
        <!-- ID for the close button, so we can reference it in the tutorial step -->
        <button id="closeInfoModalBtn" class="close-modal" onclick="hideModal('infoModal')">&times;</button>
      </div>
      <div class="tabs">
        <button class="tab active" data-tab="instructions">Instructions</button>
        <button class="tab" data-tab="about">About the Developer</button>
      </div>
      <div class="tab-content active" id="instructions">
        <h3>Instructions</h3>
        <p><strong>How to Share an Idea:</strong> Click the + button in the top right (after unlocking) to create a new post.</p>
        <p><strong>How to Use:</strong> Unlock the site by clicking "Continue with Google", then share your ideas using the + button. Use the filter button to toggle sorting between most popular and most recent.</p>
        <p><strong>The purpose of this Site:</strong> This site is meant for Teachers to share their ideas for websites.</p>

        <!-- Start tutorial from Info Modal (extra first step) -->
        <button class="submit-button" onclick="startTutorialFromInfoModal()">Start Tutorial</button>
      </div>
      <div class="tab-content" id="about">
        <h3>About the Developer</h3>
        <p>
          Hi, I'm Gavin Molter! ...
        </p>
      </div>
    </div>
  </div>

  <!-- Intro.js + Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/intro.js@5.1.0/minified/intro.min.js"></script>
  <script src="firebase.js"></script>
  <script src="main.js"></script>

  <!-- Disclaimer Banner -->
  <div class="disclaimer-banner">
    <p>This site is experimental and under development â€“ issues may occur. Please submit any issues <a href="https://forms.gle/z9MtK3tS1TS1JhK4A" target="_blank">here</a>.</p>
  </div>
</body>
</html>
